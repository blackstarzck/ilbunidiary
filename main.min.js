(()=>{"use strict";var e,t={3152:(e,t,o)=>{o(2351),o(8339),o(9327),o(9886),o(4204),o(1346),o(6374),o(4711),o(2067),o(7873),o(5648),o(5937),o(1021);var n=o(6753),i=o(1045);o(1144),o(6008),o(2888);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function s(e,t,o){return t&&a(e.prototype,t),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var c=s((function e(t){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.moving=!1,t.gltfLoader.load(t.modelSrc,(function(e){e.scene.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),o.modelMesh=e.scene.children[0],o.modelMesh.position.y=.3,o.modelMesh.name="ilbuni",t.scene.add(o.modelMesh),t.meshes.push(o.modelMesh),o.actions=[],o.mixer=new n.Iw4(o.modelMesh),o.actions[0]=o.mixer.clipAction(e.animations[0]),o.actions[1]=o.mixer.clipAction(e.animations[1]),o.actions[0].play()}))}));function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function u(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function h(e,t,o){return t&&u(e.prototype,t),o&&u(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}var m=h((function e(t){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t.x,this.y=t.y,this.z=t.z,this.visible=!1,t.gltfLoader.load(t.modelSrc,(function(e){o.modelMesh=e.scene.children[0],o.modelMesh.castShadow=!0,o.modelMesh.position.set(o.x,o.y,o.z),t.scene.add(o.modelMesh)}))})),p=o(1997);function w(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return y(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==o.return||o.return()}finally{if(s)throw r}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var v=(new n.Tap).load("./images/grid.png");v.wrapS=n.GJx,v.wrapT=n.GJx,v.repeat.x=10,v.repeat.y=10;var b=document.querySelector("#three-canvas"),g=new n.JeP({canvas:b,antialias:!0});g.setSize(window.innerWidth,window.innerHeight),g.setPixelRatio(window.devicePixelRatio>1?2:1),g.shadowMap.enabled=!0,g.shadowMap.type=n.Wk7;var M=new n.Z58,x=new n.qUd(-window.innerWidth/window.innerHeight,window.innerWidth/window.innerHeight,1,-1,-1e3,1e3),S=new n.Pq0(1,5,5);x.position.set(S.x,S.y,S.z),x.zoom=.2,x.updateProjectionMatrix(),M.add(x);var z=new n.$p8("white",2);M.add(z);var j=new n.ZyN("white",1),P=new n.Pq0(1,1,1);j.position.x=P.x,j.position.y=P.y,j.position.z=P.z,j.castShadow=!0,j.shadow.mapSize.width=2048,j.shadow.mapSize.height=2048,j.shadow.camera.left=-100,j.shadow.camera.right=100,j.shadow.camera.top=100,j.shadow.camera.bottom=-100,j.shadow.camera.near=-100,j.shadow.camera.far=100,M.add(j);var O=[],A=new n.eaF(new n.bdM(100,100),new n._4j({map:v}));A.name="floor",A.rotation.x=-Math.PI/2,A.receiveShadow=!0,M.add(A),O.push(A);var E=new n.eaF(new n.bdM(1,1),new n.V9B({color:"crimson",transparent:!0,opacity:.5}));E.rotation.x=-Math.PI/2,E.position.y=.01,E.receiveShadow=!0,M.add(E);var L=new n.eaF(new n.bdM(3,3),new n._4j({color:"yellow",transparent:!0,opacity:.5}));L.position.set(5,.005,5),L.rotation.x=-Math.PI/2,L.receiveShadow=!0,M.add(L);var k=new i.B,T=new m({gltfLoader:k,scene:M,modelSrc:"./models/house.glb",x:5,y:-1.3,z:2}),I=new c({scene:M,meshes:O,gltfLoader:k,modelSrc:"./models/ilbuni.glb"}),W=new n.tBo,H=new n.I9Y,C=new n.Pq0,q=0,F=!1,B=new n.zD7;function _(e){H.x=e.clientX/b.clientWidth*2-1,H.y=-(e.clientY/b.clientHeight*2-1)}window.addEventListener("resize",(function(){x.left=-window.innerWidth/window.innerHeight,x.right=window.innerWidth/window.innerHeight,x.top=1,x.bottom=-1,x.updateProjectionMatrix(),g.setSize(window.innerWidth,window.innerHeight),g.render(M,x)})),b.addEventListener("mousedown",(function(e){F=!0,_(e)})),b.addEventListener("mouseup",(function(){F=!1})),b.addEventListener("mousemove",(function(e){F&&_(e)})),b.addEventListener("touchstart",(function(e){F=!0,_(e.touches[0])})),b.addEventListener("touchend",(function(){F=!1})),b.addEventListener("touchmove",(function(e){F&&_(e.touches[0])})),function e(){var t=B.getDelta();I.mixer&&I.mixer.update(t),I.modelMesh&&x.lookAt(I.modelMesh.position),I.modelMesh&&(F&&(W.setFromCamera(H,x),function(){var e,t=w(W.intersectObjects(O));try{for(t.s();!(e=t.n()).done;){var o=e.value;"floor"===o.object.name&&(C.x=o.point.x,C.y=.3,C.z=o.point.z,I.modelMesh.lookAt(C),I.moving=!0,E.position.x=C.x,E.position.z=C.z);break}}catch(e){t.e(e)}finally{t.f()}}()),I.moving?(q=Math.atan2(C.z-I.modelMesh.position.z,C.x-I.modelMesh.position.x),I.modelMesh.position.x+=.05*Math.cos(q),I.modelMesh.position.z+=.05*Math.sin(q),x.position.x=S.x+I.modelMesh.position.x,x.position.z=S.z+I.modelMesh.position.z,I.actions[0].stop(),I.actions[1].play(),Math.abs(C.x-I.modelMesh.position.x)<.03&&Math.abs(C.z-I.modelMesh.position.z)<.03&&(I.moving=!1),Math.abs(L.position.x-I.modelMesh.position.x)<1.5&&Math.abs(L.position.z-I.modelMesh.position.z)<1.5?T.visible||(T.visible=!0,L.material.color.set("seagreen"),p.Ay.to(T.modelMesh.position,{duration:1,y:1,ease:"Bounce.easeOut"}),p.Ay.to(x.position,{duration:1,y:3})):T.visible&&(T.visible=!1,L.material.color.set("yellow"),p.Ay.to(T.modelMesh.position,{duration:.5,y:-1.3}),p.Ay.to(x.position,{duration:1,y:5}))):(I.actions[1].stop(),I.actions[0].play())),g.render(M,x),g.setAnimationLoop(e)}()}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var r=o[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,o,i,r)=>{if(!o){var a=1/0;for(d=0;d<e.length;d++){for(var[o,i,r]=e[d],s=!0,l=0;l<o.length;l++)(!1&r||a>=r)&&Object.keys(n.O).every((e=>n.O[e](o[l])))?o.splice(l--,1):(s=!1,r<a&&(a=r));if(s){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,i,r]},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var i,r,[a,s,l]=o,c=0;if(a.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)var d=l(n)}for(t&&t(o);c<a.length;c++)r=a[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},o=self.webpackChunkthreejs_study=self.webpackChunkthreejs_study||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=n.O(void 0,[95],(()=>n(3152)));i=n.O(i)})();